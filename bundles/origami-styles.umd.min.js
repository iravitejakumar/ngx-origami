!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/router"),require("@polymer/polymer/lib/utils/style-gather"),require("ngx-origami/util"),require("ngx-origami/polyfills"),require("@angular/common"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("ngx-origami/styles",["exports","@angular/core","@angular/router","@polymer/polymer/lib/utils/style-gather","ngx-origami/util","ngx-origami/polyfills","@angular/common","@angular/platform-browser"],t):t(((e=e||self)["ngx-origami"]=e["ngx-origami"]||{},e["ngx-origami"].styles={}),e.ng.core,e.ng.router,e.styleGather,e["ngx-origami"].util,e["ngx-origami"].polyfills,e.ng.common,e.ng.platformBrowser)}(this,(function(e,t,n,r,o,i,a,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l;function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function f(e,t){return function(n,r){t(n,r,e)}}function p(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))}function y(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}var g=new Map;var h=new Map;function S(){return Array.from(h.keys())}function v(e){return e&&h.get(e)||[]}var b=/:host-context\((.*)\)/g,w=/:host(?:\((.*)\))?/g;function _(e){var t=E(e);return t.forEach((function(e){!function e(t){if(Array.isArray(t.statements))t.statements.forEach((function(t){return e(t)}));else{var n=t.selector;n=(n=(n=(n=n.trim()).split(",").map((function(e){return e.trim().split(" ").map((function(e){return(e=e.trim()).includes(":host")?e:e+"[_ngcontent-%COMP%]"})).join(" ")})).join(",")).replace(b,"*$1 [_nghost-%COMP%]")).replace(w,"[_nghost-%COMP%]$1"),t.selector=n}}(e)})),R(t)}function E(e){for(var t=!1,n=!1,r=!1,o=0,i=!1,a=[],u={selector:"",block:""},c=0;c<e.length;c++){var l=e[c];switch(l){case"@":t=!0;break;case"'":n=!n;break;case'"':r=!r;break;case"{":case"}":n||r||("{"==l?o++:i=0===--o)}o?u.block+=l:i?(u.block+=l,t&&(u.statements=E(u.block.substring(u.block.indexOf("{")+1,u.block.lastIndexOf("}")))),u.selector=u.selector.trim(),u.block=u.block.trim(),a.push(u),u={selector:"",block:""},i=!1):u.selector+=l}return a}function R(e){return e.map((function(e){var t=Array.isArray(e.statements)?"{"+R(e.statements)+"}":e.block;return e.selector+" "+t})).join("\n")}var T=new Map,M=new Map;function C(e){Array.from(S()).forEach((function(t){if(!M.has(t))try{var n=e.resolveComponentFactory(t);M.set(t,n.selector),T.set(n.selector,t)}catch(e){}}))}function O(e){return T.get(e)}var A={provide:t.APP_INITIALIZER,multi:!0,useFactory:x,deps:[t.NgModuleRef]},N={provide:t.APP_INITIALIZER,multi:!0,useFactory:I,deps:[t.NgModuleRef]};function x(e){var r=I(e);return function(){r(),e.injector.get(n.Router).events.subscribe((function(e){"route"in e&&!e.route._loadedConfig&&o.whenSet(e.route,"_loadedConfig",void 0,(function(e){C(e.module.injector.get(t.ComponentFactoryResolver))}))}))}}function I(e){return function(){j(e.injector.get(t.RendererFactory2)),C(e.injector.get(t.ComponentFactoryResolver))}}var P=[];function j(e){var n=e.createRenderer;e.createRenderer=function(e,o){var i,a=e&&e.localName;if(a&&o&&-1===P.indexOf(a)){var u=v(O(a)),c=u.map((function(e){return r.stylesFromModule(e).map((function(e){return e.innerText})).join("\n")}));switch(o.encapsulation){case t.ViewEncapsulation.Emulated:default:c=c.map((function(e){return _(e)}));break;case t.ViewEncapsulation.None:case t.ViewEncapsulation.Native:case t.ViewEncapsulation.ShadowDom:}(i=o.styles).push.apply(i,m(c)),P.push(a)}return n.apply(this,arguments)}}var k=function(){function e(){}return e=s([t.NgModule({providers:[N]})],e)}(),F=function(){function e(){}return e=s([t.NgModule({providers:[A]})],e)}(),H=new t.InjectionToken("usingApply");function D(e){return p(this,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:return!(t=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface)||window.ShadyCSS.nativeCss&&!e?[3,2]:[4,Promise.all(Array.from(document.styleSheets).map((function(e){var n=e.ownerNode;if(L(n)&&!n.hasAttribute("scope"))return t.addCustomStyle(n),Promise.resolve();if(e.href){if(!e._fetching){var r=e.href;e._fetching=new Promise((function(e){var o=new XMLHttpRequest;o.addEventListener("load",(function(){var r=document.createElement("style");r.innerHTML=o.responseText,n.parentNode.insertBefore(r,n),n.parentNode.removeChild(n),t.addCustomStyle(r),e()})),o.open("GET",r),o.send()}))}return e._fetching}})))];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}function L(e){return"style"===e.localName}var q=/(?:\\)(--\w[\w-_]*:\s*{[^}]*})(;)?/g,V=function(e){function n(t,n){var r=e.call(this,t)||this;return r.usingApply=n,r}return function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,e),n.prototype.addStyles=function(t){e.prototype.addStyles.call(this,t.map((function(e){return e.replace(q,"$1")})))},n.prototype.onStylesAdded=function(t){e.prototype.onStylesAdded.call(this,t),D(this.usingApply)},n=s([f(0,t.Inject(a.DOCUMENT)),f(1,t.Optional()),f(1,t.Inject(H))],n)}(u["ɵDomSharedStylesHost"]);function G(){return new V(document)}var Y={provide:u["ɵDomSharedStylesHost"],useFactory:G},X=function(){function e(){}var n;return n=e,e.usingApply=function(){return{ngModule:n,providers:[{provide:H,useValue:!0}]}},e=n=s([t.NgModule({imports:[i.WebComponentsReadyModule],providers:[Y]})],e)}();e.COMPONENT_VARIABLE="%COMP%",e.CONTENT_ATTR="_ngcontent-%COMP%",e.HOST_ATTR="_nghost-%COMP%",e.HOST_CONTEXT_REGEX=b,e.HOST_REGEX=w,e.INJECT_STYLES_NO_ROUTER_PROVIDER=N,e.INJECT_STYLES_PROVIDER=A,e.IncludeStyles=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return h.set(t,e),t}},e.IncludeStylesModule=F,e.IncludeStylesNoRouterModule=k,e.SHADYCSS_SHARED_STYLES_HOST_PROVIDER=Y,e.ShadyCSSModule=X,e.ShadyCSSSharedStylesHost=V,e.ShadyCSSSharedStylesHostFactory=G,e.USING_APPLY=H,e.clearStyleModuleCache=function(){g=new Map},e.getRegisteredTypes=S,e.getStyleModulesFor=v,e.getTypeFor=O,e.importStyleModule=function(e){if(!g.has(e)){l||(l=customElements.get("dom-module"));var t=l.import(e,"template");if(t){var n=t.content.querySelectorAll("style");g.set(e,Array.from(n).map((function(e){return e.innerText})).join("\n"))}else g.set(e,"")}return g.get(e)},e.injectIncludeStyles=x,e.injectIncludeStylesNoRouter=I,e.isStyleNode=L,e.parseStyleStatements=E,e.patchRendererFactory=j,e.processStylesheets=D,e.resetIncludeStyles=function(){h=new Map},e.resetTypeSelectors=function(){T=new Map,M=new Map},e.scanComponentFactoryResolver=C,e.statementsToString=R,e.styleToEmulatedEncapsulation=_,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=origami-styles.umd.min.js.map